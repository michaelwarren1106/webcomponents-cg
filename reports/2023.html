<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Web Components Community Group: 2023 Spec/API status</title>
    <script
      src="https://www.w3.org/Tools/respec/respec-w3c"
      class="remove"
      defer
    ></script>
    <script class="remove">
      // All config options at https://respec.org/docs/
      var respecConfig = {
        specStatus: "CG-DRAFT",
        latestVersion: null,
        edDraftURI: null,
        editors: [
          {
            name: "Westbrook Johnson",
            url: "https://westbrookjohnson.com",
          }
        ],
        github: "w3c/webcomponents-cg",
        shortName: "webcomponents-cg",
        xref: "web-platform",
        group: "webcomponents",
        tocIntroductory: true,
      };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>The following aims to support implementors in prioritizing, finalizing, and shipping new and agreed upon specifications in accordance with what is most needed by the web component developing community.</p>
    </section>
    <section id="sotd">
      <p>The 2023 report is currently being drafted.</p>
    </section>
    <section class="informative">
      <h2>Introduction</h2>
      <p>Web component features in the platform swing broadly from twinkle in someone's eye to just waiting for that last browser vendor to ship in the wild. Along that spectrum, there are a myriad of features that browser implementors and web developers could focus on and it's difficult to always align on which are most important. We, the Web Components Community Group, look to build on our work from <a href="./2021.html">2021</a> and <a href="./2022.html">2022</a> and continue to shed light on the priorities in this space as seen by developers conuming these features.</p>
      <p>Taking the feedback from previous years to heart, we are drew out four features of the highest priority. Each are at different places on the spectrum of "ready to consume", and we look forward to working more closely with vendors in making progress towards that goal. The four features are listed below by status:</p>
      <section>
        <h3>Seeking Browser Parity</h3>
        <p>We noticed the following specs already have a high degree of alignment from an implementation perspective, but support in browsers is still not equally distributed.  Filling in these gaps would be a big win for users and developers alike for a more predictable web.</p>
        <ul>
          <li><a href="#declarative-shadow-dom">Declarative Shadow DOM</a></li>
        </ul>
      </section>
      <section>
        <h3>Seeking Initial Prototyping</h3>
        <p>The following specs have recieved a quality review at the proposal stage and are ready to be prototyped in browser. What sort of support could the Web Components Community Group lend to browser implementors as part of this process?</p>
        <ul>
          <li><a href="#scoped-element-registries">Scoped Registries</a></li>
        </ul>
      </section>
      <section>
        <h3>Seeking specification concensus</h3>
        <p>The following specs we see as highly valuable to the developer community for being able to deliver great web experiences to users when using Web Components.  As it pertains to topics like Aria and SSR, these specs just need a little more alignment across browser implementors so that consensus can be achieved.</p>
        <ul>
          <li><a href="#cross-root-aria">Cross-root Aria</a></li>
          <li><a href="#css-slot-content-detection">CSS Slot Content Detection</a></li>
        </ul>
      </section>
      <section>
        <h3>Table of Contents</h3>
        <table>
          <thead>
            <tr>
              <th>Feature or Problem</th>
              <th>GitHub Issue(s)</th>
              <th>Status(?)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th><a href="#cross-root-aria">Cross-root ARIA</a></th>
              <td>
                <a href="https://github.com/WICG/aom/issues/169">WICG/aom#169</a><br>
                <a href="https://github.com/WICG/aom/issues/107">WICG/aom#107</a><br>
                <a href="https://github.com/WICG/webcomponents/issues/917">WICG/webcomponents#917</a><br>
                <a href="https://github.com/WICG/webcomponents/issues/916">WICG/webcomponents#916</a>
              </td>
              <td>Uncertain</td>
            </tr>
            <tr>
              <th><a href="#declarative-shadow-dom">Declarative Shadow DOM</a></th>
              <td><a href="https://github.com/whatwg/dom/issues/831">whatwg/dom#831</a></td>
              <td>Concensus, lacking parity in implementation</td>
            </tr>
            <tr>
              <th><a href="#scoped-element-registries">Scoped Element Registries</a></th>
              <td><a href="https://github.com/WICG/webcomponents/issues/716">WICG/webcomponents#716</a></td>
              <td>Consensus</td>
            </tr>
            <tr>
              <th><a href="#css-slot-content-detection">CSS Slot Content Detection</a></th>
              <td>
                <a href="https://github.com/w3c/csswg-drafts/issues/7922">w3c/csswg-drafts#7922</a>
                <a href="https://github.com/WICG/webcomponents/issues/936">WICG/webcomponents#936</a>
                <a href="https://github.com/w3c/csswg-drafts/issues/6867">w3c/csswg-drafts#6867</a>
              </td>
              <td>Uncertain</td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    <section>
      <h2>Cross-root ARIA</h2>
      <section>
        <h3>Links</h3>
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/index.html#cross-root-aria">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/leobalter/cross-root-aria-delegation" target="_blank">Cross-root ARIA Delegation</a></dd>
          <dd><a href="https://github.com/Westbrook/cross-root-aria-reflection" target="_blank">Cross-root ARIA Reflection</a></dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section>
        <h3>Description</h3>
        <p>
          Shadow boundaries prevent content on either side of the boundary from referencing each other via ID references. ID references being the basis of the majority of the accessibility patters outlines by aria attributes, this causes a major issue in developing accessible content with shadow DOM. While there are ways to develop these UIs by orchestrating the relationships between elements of synthesizing the passing of content across a shadow boundary, these practices generally position accessible development out of reach for most developers, both at component creation and component consumption time.
        </p>
        <p>
          Developers of a custom element should be able to outline to browsers how content from outside of their shadow root realtes to the content within it and visa versa. Cross-root ARIA Delegation would allow developers to define how content on the outside is mapped to the content within a shadow root, while Cross-root ARIA Reflection would define how content within a shadow root was made available to content outside of it.
        </p>
      </section>
      <section>
        <h3>Status</h3>
        <p>
          Implementors participating in bi-weekly Accessibility Object Model syncs with WICG have all been favorable to the delegation work and are interested in the reflection work as a tighly related API that maybe is a fast follower. Leo Balter is working on finalizing proposal text for the delegation API at which time Westbrook Johnson will apply similar teminology to the reflection API proposal.
        </p>
      </section>
      <section>
        <h3>Initial API Summary/Quick API Proposal</h3>
        <h4>Delegation API</h4>
        <p>HTML</p>
        <pre>
          <code>
            &lt;span id="foo">Description!&lt;/span>
            &lt;template id="template1">
              &lt;input id="input" autoarialabel autoariadescribedby />
              &lt;span autoarialabel>Another target&lt;/span>
            &lt;/template>
            &lt;x-foo aria-label="Hello!" aria-describedby="foo">&lt;/x-foo>
          </code>
        </pre>
        <p>JS</p>
        <pre>
          <code>
            const template = document.getElementById('template1');

            class XFoo extends HTMLElement {
              constructor() {
                super();
                this.attachShadow({ mode: "open", delegatesAriaLabel: true, delegatesAriaDescribedBy: true });
                this.shadowRoot.appendChild(template.content.cloneNode(true));
              }
            }

            customElements.define("x-foo", XFoo);
          </code>
        </pre>
        <h4>Reflection API</h4>
        <p>HTML</p>
        <pre>
          <code>
            &lt;input aria-controlls="foo" aria-activedescendent="foo">Description!&lt;/span>
            &lt;template id="template1">
              &lt;ul reflectariacontrols>
                &lt;li>Item 1&lt;/li>
                &lt;li reflectariaactivedescendent>Item 2&lt;/li>
                &lt;li>Item 3&lt;/li>
              &lt;/ul&gt;
            &lt;/template>
            &lt;x-foo id="foo">&lt;/x-foo>
          </code>
        </pre>
        <p>JS</p>
        <pre>
          <code>
            const template = document.getElementById('template1');

            class XFoo extends HTMLElement {
              constructor() {
                super();
                this.attachShadow({ mode: "open", reflectsAriaControls: true, reflectsAriaActivedescendent: true });
                this.shadowRoot.appendChild(template.content.cloneNode(true));
              }
            }
            customElements.define("x-foo", XFoo);
          </code>
        </pre>
      </section>
      <section>
        <h3>Key Scenarios</h3>
        <p>When developing many of the patterns outlines in the <a href="https://www.w3.org/WAI/ARIA/apg/patterns/" target="_blank">ARIA Authoring Practices Guide</a> having this capability would allow for encapsulating responsibilities outlined by the `role` attribute in a shadow root.</p>
      </section>
      <section>
        <h3>Related Specs</h3>
        <ul>
          <li><a href="https://github.com/WICG/aom" target="_blank">AOM</a></li>
          <li><a href="https://wicg.github.io/aom/aria-reflection-explainer.html" target="_blank">ARIA Reflection</a></li>
          <li><a href="https://github.com/WICG/aom/blob/gh-pages/element_reference_properties.md" target="_blank">Element reference DOM properties</a></li>
        </ul>
      </section>
      <section>
        <h3>Open Questions</h3>
        <ul>
          <li>Should these two ideas can/should really ship separately? While the reflection API was ideated after the delegation API it may not be practical to separate them at the implementation/consumption level.</li>
          <li>Is `delegation` and `reflection` the right name for these APIs? Particularly, "reflection" is used in <a href="https://wicg.github.io/aom/aria-reflection-explainer.html" target="_blank">ARIA Reflection</a>.</li>
          <li>There are non-ARIA attributes that would benefit from being supported by these APIs. Should they be drafted in a more general way?</li>
        </ul>
      </section>
    </section>

    <section>
      <h2>CSS Slot Content Detection</h2>
      <section>
        <h3>Links</h3>
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd>N/A</dd>
          <dt>GitHub issues:</dt>
          <dd>---</dd>
          <dt>Browser positions:</dt>
          <dd>---</dd>
        </dl>
      </section>
      <section>
        <h3>Description</h3>
        <p>---</p>
      </section>
      <section>
        <h3>Status</h3>
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section>
        <h3>Initial API Summary/Quick API Proposal</h3>
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section>
        <h3>Key Scenarios</h3>
        <p>---</p>
      </section>
      <section>
        <h3>Concerns</h3>
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section>
        <h3>Dissenting Opinion</h3>
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section>
        <h3>Related Specs</h3>
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section>
        <h3>Open Questions</h3>
        <ul>
          <li>---</li>
        </ul>
      </section>
    </section>
    <section>
      <h2>Declarative Shadow DOM</h2>
      <section>
        <h3>Links</h3>
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/index.html#declarative-shadow-dom">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/whatwg/dom/issues/831">https://github.com/whatwg/dom/issues/831</a></dd>
          <dt>Browser positions:</dt>
          <dd><a href="https://chromestatus.com/feature/5191745052606464">Chrome (Shipped)</a></dd>
          <dd><a href="https://github.com/mozilla/standards-positions/issues/335">Mozilla</a></dd>
          <dd><a href="https://github.com/WebKit/standards-positions/issues/12">Safari</a></dd>
        </dl>
      </section>
      <section>
        <h3>Description</h3>
        <p>Declarative Shadow DOM is a mechanism to express Shadow DOM using only HTML, with no dependency on JavaScript, much like light DOM can be declaratively expressed today.</p>
      </section>
      <section>
        <h3>Status</h3>
        <ul>
          <li>Partial consensus, some implementation</li>
        </ul>
      </section>
      <section>
        <h3>Initial API Summary/Quick API Proposal</h3>
        <p>Below is an example taken from the <a href="https://web.dev/declarative-shadow-dom">web.dev blog</a> on Declarative Shadow DOM.</a>
          <pre>
            &lt;host-element&gt;
              &lt;template shadowroot="open"&gt;
                &lt;slot&gt;&lt;/slot&gt;
              &lt;/template&gt;
              &lt;h2>Light content&lt;/h2>&gt;
            &lt;/host-element>
          </pre>
        </p>
      </section>
      <section>
        <h3>Key Scenarios</h3>
        <p>Server-Side Rendering: Without Declarative Shadow DOM, servers cannot deliver complete websites that include web component content. Markup cannot be efficiently delivered and then hydrated with JavaScript client-side.</p>
        <p>JavaScript-less environments: Many web components could be implemented without JavaScript, taking advantage of encapsulated DOM and styles. However, web components cannot currently be rendered by users who have JavaScript disabled. Developers who are more comfortable with markup than with scripting may avoid shadow DOM altogether due to its tight coupling with JavaScript..</p>
      </section>
      <section>
        <h3>Concerns</h3>
        <ul>
          <li>Mozilla considers this to be non-harmful, though debates the merits on ROI to developers weighed against the added complexity to be added to the HTML parser from a performance perspective.</li>
          <li>Safari would like to see compatibility with Scoped Element Registry addressed first.</li>
        </ul>
      </section>
      <section>
        <h3>Dissenting Opinion</h3>
        <ul>
          <li>N / A</li>
        </ul>
      </section>
      <section>
        <h3>Related Specs</h3>
        <ul>
          <li><a href="https://github.com/WICG/webcomponents/issues/716">Scoped Element Registries</a></li>
        </ul>
      </section>
      <section>
        <h3>Open Questions</h3>
        <ul>
          <li>Mozilla would like to see more <a href="https://github.com/whatwg/dom/issues/831#issuecomment-988394185">real world uses cases</a> of Declarative Shadow DOM in the wild.  <a href="https://github.com/whatwg/dom/issues/831#issuecomment-1204554491" target="_blank">GitHub has confirmed that they are using DSD</a> and see many architectural benefits from it, especially for their design system. Although a polyfill exists, it comes as a bit of a catch-22 when trying to target pure SSR Web Components (HTML) use cases.</li>
          <li>Safari would like to <a href="https://github.com/whatwg/dom/issues/831#issuecomment-797845645">get consensus on the solution for Scoped Element Registries first.</a></li>
        </ul>
      </section>
    </section>
    <section>
      <h2>Scoped Element Registries</h2>
      <section>
        <h3>Links</h3>
        <dl>
          <dt>Previous WCCG Report(s)</dt>
          <dd><a href="https://w3c.github.io/webcomponents-cg/index.html#scoped-element-registries">2021</a></dd>
          <dt>GitHub issues:</dt>
          <dd><a href="https://github.com/WICG/webcomponents/issues/716">WICG/webcomponents#716</a></dd>
          <dt>Browser positions:</dt>
          <dd>
            <ul>
              <li>
                <a href="https://github.com/WebKit/standards-positions/issues/38">WebKit</a>
              </li>
              <li>
                <a href="https://groups.google.com/a/chromium.org/g/blink-dev/c/um-9YjJWyEQ/m/MhKN0L7FAgAJ">Chromium</a>
              </li>
              <li>
                <a href="https://github.com/mozilla/standards-positions/issues/424">Mozilla</a>
              </li>
            </ul>
          </dd>
        </dl>
      </section>
      <section>
        <h3>Description</h3>
        <p>Scoped element registries allow custom element definitions to be scoped to one or more shadow roots. This allows the same tag name to be used with different implementations in different parts of the page, greatly reducing tag name collisions.</p>
      </section>
      <section>
        <h3>Status</h3>
        <ul>
          <li>Chromium: prototyping</li>
          <li>WebKit: ?</li>
          <li>Mozilla: ?</li>
        </ul>
      </section>
      <section>
        <h3>Initial API Summary/Quick API Proposal</h3>
        <p>Summary or proposal based on current status; paragraph(s) and code.</p>
      </section>
      <section>
        <h3>Key Scenarios</h3>
        <ul>
          <li>Building an app npm lbiraries that define elements. npm may duplicate packages and therefore custom element definitions.</li>
          <li>Complex multi-team applications. Sub-teams often develop and deploy subsystems separately and may include multiple copies of libraries that define custom elements.</li>
          <li>Complex elements with other custom elements as internal implementation detail. These elements may not want to take up names in the global registry for their sub-components.</li>
          <li>Distributing elements via npm and CDNs. If both distribution methods are used on a page, one will error. npm usage can be directed to use scoped registries to avoid collisions.</li>
          <li>Plug in systems. Plug-ins might bring their own custom element definitions which should not collide with the application or other plugins.</li>
        </ul>
      </section>
      <section>
        <h3>Concerns</h3>
        <ul>
          <li>Interaction with declarative shadow DOM (addressed)</li>
        </ul>
      </section>
      <section>
        <h3>Dissenting Opinion</h3>
        <ul>
          <li>None</li>
        </ul>
      </section>
      <section>
        <h3>Related Specs</h3>
        <ul>
          <li>---</li>
        </ul>
      </section>
      <section>
        <h3>Open Questions</h3>
        <ul>
          <li><a href="https://github.com/WICG/webcomponents/issues/914">[scoped-registries] Interaction with declarative shadow DOM #914</a></li>
          <li><a href="https://github.com/WICG/webcomponents/issues/907">Scoped Custom Element Registry: Moving elements with shadow roots between documents #907</a></li>
          <li><a href="https://github.com/WICG/webcomponents/issues/923">[scoped-registries] Element upgrade ordering #923</a></li>
        </ul>
      </section>
    </section>
    <section id="conformance">
      <p>
        This is required for specifications that contain normative material.
      </p>
    </section>
    <section id="index"></section>
  </body>
</html>
